---
title: "STAT 331 Portfolio"
author: "Jared Hammett"
format: html 
embed-resources: true
layout: margin-left
editor: visual
execute: 
  eval: false
  echo: true
code-tools: true
code-fold: true
toc: true
toc-title: "Contents"
toc-depth: 2
theme: slate
---

[**My Grade:**]{.underline} I believe my grade equivalent to course work evidenced below to be an A-.

[**Learning Objective Evidence:**]{.underline} In the code chunks below, provide code from Lab or Challenge assignments where you believe you have demonstrated proficiency with the specified learning target. Be sure to specify **where** the code came from (e.g., Lab 4 Question 2).

## Working with Data

**WD-1: I can import data from a *variety* of formats (e.g., csv, xlsx, txt, etc.).**

-   `csv` Example 1

```{r}
#| label: wd-1-csv-1
# Lab 2: Question 1
library(here)
surveys <- read_csv(here::here("week_2", "labs", "surveys.csv"))

```

-   `csv` Example 2

```{r}
#| label: wd-1-csv-2
# Lab 3: Question 2
library(here)
evals <- read_csv(here::here("week_3", "labs", "teacher_evals.csv"))

```

-   `xlsx`

```{r}
#| label: wd-1-xlsx

```

**WD-2: I can select necessary columns from a dataset.**

-   Example selecting specified columns

```{r}
#| label: wd-2-ex-1
# Lab 3: Question 5
# feedback: Nice work! Your code does a great job filtering across multiple columns. However, the formatting of your code could use a bit of help. Specifically, I would love to see you using named argments and the correct function syntax for the across() function:
# across(.cols = c(course_id, teacher_id), .fns = ~ as.factor(.x))

teacher_evals_clean <- evals |>
  rename(sex = gender) |>
  filter(no_participants >= 10) |>
  mutate(
    across(.cols = c(teacher_id, course_id, academic_degree, sex), .fns = ~ as.factor),
    seniority = as.integer(seniority)
  ) |>
  select(c(course_id,
           teacher_id,
           question_no,
           no_participants,
           resp_share,
           SET_score_avg,
           percent_failed_cur,
           academic_degree,
           seniority,
           sex
           ))

```

-   Example removing specified columns

```{r}
#| label: wd-2-ex-2
#Lab 3: Question 8 (Modified)
#Note: this is pretty gross and not a great way of selecting the proper columns but demonstrates negating columns and helps trim some of the fat from the output
teacher_evals_clean |>
  filter(if_any(.cols = everything(), .fns = ~ is.na(.x))) |>
  select(course_id, teacher_id, everything(), -c(sex, question_no, seniority, no_participants, academic_degree ))

```

-   Example selecting columns based on logical values (e.g., `starts_with()`, `ends_with()`, `contains()`, `where()`)

```{r}
#| label: wd-2-ex-3
# Lab 3: Question 8 (Modified)
# feedback: Look at your counts! This seems like a lot more teachers than you found in Question 6! What do you need to do before calculating the summary statistics?

teacher_evals_clean |>
  filter(if_any(.cols = everything(), .fns = ~ is.na(.x))) |>
  select(ends_with("id"), everything())

```

**WD-3: I can filter rows from a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   Numeric Example 1

```{r}
#| label: wd-3-numeric-ex-1
# Lab 5
person |>
  left_join(drivers_license, by = join_by(license_id == id)) |>
  left_join(facebook_event_checkin, by = join_by(id == person_id)) |>
  mutate(date = ymd(date)) |>
  filter(height >= 65, height <= 67, hair_color == 'red',
         car_make == 'Tesla', car_model == 'Model S', event_name == "SQL Symphony Concert",
         year(date) == 2017, month(date) == '12') |>
  group_by(id, name) |>
  summarise(cnt = n(), .groups = 'drop' ) |>
  filter(cnt == 3) |>
  pull(name)

```

-   Numeric Example 2

```{r}
#| label: wd-3-numeric-ex-2
# Lab 3: Question 10
# feedback: You should only call the filter() function once!
teacher_evals_clean |>
  group_by(teacher_id) |>
  summarise(
    n_courses = n_distinct(course_id),
    avg_q1    = mean(SET_score_avg, na.rm = TRUE),
    .groups = "drop"
  ) |>
  filter(question_no == 901,
         n_courses >= 5,
         avg_q1 %in% c(max(avg_q1), min(avg_q1))) |>
  arrange(desc(avg_q1))


```

-   Character Example 1 (any context)

```{r}
#| label: wd-3-character
# Lab 3: Question 12
# feedback: I would recommend using the %in% operator instead of the or!
# Is there a way you can get the max *and* min in **one** pipeline? You are so close! You want to filter the max OR the min!

teacher_evals_clean |>
  filter(academic_degree %in% c('dr', 'prof')) |>
  group_by(teacher_id) |>
  summarise(
    avg_response = mean(resp_share),
    seniority = first(seniority),
    sex = first(sex),
    .groups = "drop"
  ) |>
  filter(avg_response %in% c(max(avg_response), min(avg_response))) |>
  select(teacher_id, avg_response, seniority, sex) |>
  arrange(desc(avg_response))

```

-   Character Example 2 (example must use functions from **stringr**)

```{r}
#| label: wd-3-string
# Lab 5 (Modified)
interview |>
  left_join(person, join_by(person_id == id)) |>
  filter(str_detect(name, "Annabel ") |
           ((address_street_name == "Northwestern Dr") &
              address_number == max(address_number)))

```

-   Date (example must use functions from **lubridate**)

```{r}
#| label: wd-3-date
person |>
  left_join(drivers_license, by = join_by(license_id == id)) |>
  left_join(facebook_event_checkin, by = join_by(id == person_id)) |>
  mutate(date = ymd(date)) |>
  filter(height >= 65, height <= 67, hair_color == 'red',
         car_make == 'Tesla', car_model == 'Model S', event_name == "SQL Symphony Concert",
         year(date) == 2017, month(date) == '12') |>
  group_by(id, name) |>
  summarise(cnt = n(), .groups = 'drop' ) |>
  filter(cnt == 3) |>
  pull(name)

```

**WD-4: I can modify existing variables and create new variables in a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   Numeric Example 1

```{r}
#| label: wd-4-numeric-ex-1
# Challenge 3: Question 1 (Modified)

teacher_evals_compare <- evals |>
  mutate(
    question_no = question_no - 900,
    SET_level = case_when(SET_score_avg >= 4 ~ "excellent",
                               SET_score_avg < 4 ~ "standard"),
        sen_level = case_when(seniority <= 4 ~ "junior",
                              seniority >= 5 & seniority <= 8 ~ "senior",
                              seniority > 8 ~ "very senior")) |>
  filter(question_no == 3) |>
  select(question_no, course_id, SET_level, sen_level)

teacher_evals_compare

```

-   Numeric Example 2

```{r}
#| label: wd-4-numeric-ex-2
# Lab 3: Question 5
teacher_evals_clean <- evals |>
  rename(sex = gender) |>
  filter(no_participants >= 10) |>
  mutate(
    across(.cols = c(teacher_id, course_id, academic_degree, sex), .fns = ~ as.factor),
    seniority = as.integer(seniority)
  ) |>
  select(c(course_id,
           teacher_id,
           question_no,
           no_participants,
           resp_share,
           SET_score_avg,
           percent_failed_cur,
           academic_degree,
           seniority,
           sex
           ))
```

-   Factor Example 1 (renaming levels)

```{r}
#| label: wd-4-factor-ex-1
# Lab 4: Question 7
# Nice work pivoting and modifying the age variable!
#Can you reorder the facets so they go in the same order as mine?
#Can you reorder the colors in the legend so they appear in the same order as the lines in the plot? I am specifically looking for a tool that does the reordering for you since doing the reordering by hand is not a robust programming practice!
#Nice work changing the size of the x-axis text! Can you make this change to other aspects of the plot?

library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"),
      age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool"),
      census_region = fct_reorder2(census_region, study_year, weekly_cost)) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500)) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "magma") +
  scale_fill_viridis_d(option = "magma") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(4.0, "mm")) 
```

-   Factor Example 2 (reordering levels)

```{r}
#| label: wd-4-factor-ex-2
# Lab 4: Question 7 (Modified)
# Note : this data is already releveled in the proper order but this is for demonstration
ca_childcare |>
  pivot_longer(
    c(mc_infant, mc_toddler, mc_preschool),
    names_to = "age_group",
    values_to = "weekly_cost"
  ) |>
  mutate(age_group = recode(age_group,
                            mc_infant="Infant", mc_toddler="Toddler", mc_preschool="Preschool"),
  age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool")) |>
  ggplot(aes(study_year, weekly_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = `loess`, formula = 'y ~ x') +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500))+
  labs(
    title = "Weekly Median Price for Center-Based Childcare ($)",
    y = NULL,
    x = "Study Year",
    color = "California Region"
  ) +
  theme_bw() +
  theme(
    aspect.ratio = 1,
    axis.text.x = element_text(size = 6),
    legend.key.size = unit(3.0, "mm")
  )

```

-   Character (example must use functions from **stringr**)

```{r}
#| label: wd-4-string
# Lab 8: Question 3

#helper function for formatting labels
format_label <- function(var) {
    label <- var |>
      str_replace_all("_", " ") |>
      str_to_lower() |>                 
      str_to_title() |>
      str_replace("Mm", "(mm)")
    return(label)
  }

scatter_plot <- function(df, x, y) {

  x_label <- format_label(as_label(enquo(x)))
  y_label <- format_label(as_label(enquo(y)))

  ggplot(df,
         aes(x = {{ x }},
             y = {{ y }},
             color = {{ y }})) +
    geom_point(alpha = 0.7, size = 2) +
    guides(color = "none") +
    labs(
      title = str_c("Scatterplot of ", y_label, " vs ", x_label),
      x = x_label,
      y = y_label,
      color = y_label,
    ) +
    theme(legend.position = "none")
}
```

-   Date (example must use functions from **lubridate**)

```{r}
#| label: wd-4-date
# Lab 5
person |>
  left_join(drivers_license, by = join_by(license_id == id)) |>
  left_join(facebook_event_checkin, by = join_by(id == person_id)) |>
  mutate(date = ymd(date)) |>
  filter(height >= 65, height <= 67, hair_color == 'red',
         car_make == 'Tesla', car_model == 'Model S', event_name == "SQL Symphony Concert",
         year(date) == 2017, month(date) == '12') |>
  group_by(id, name) |>
  summarise(cnt = n(), .groups = 'drop' ) |>
  filter(cnt == 3) |>
  pull(name)

```

**WD-5: I can use mutating joins to combine multiple dataframes.**

-   `left_join()` Example 1

```{r}
#| label: wd-5-left-ex-1
#Lab 4: Question 2
# Technically, you don't need to use join_by() if both datasets have the same column names. You can simply use by = "county_fips_code".
# I would highly recommend filtering first, so you are working with (joining) a smaller dataset.
ca_childcare <- left_join(x = childcare_costs,
                          y = counties,
                          by = join_by(county_fips_code)) |>
filter(state_name == "California")
ca_childcare
```

-   `right_join()` Example 1

```{r}
#| label: wd-5-right
# Lab 5 (Modified)
person |>
  right_join(interview, join_by(id == person_id)) |>
  filter(str_detect(name, "Annabel ") |
           ((address_street_name == "Northwestern Dr") &
              address_number == max(address_number)))

```

-   `left_join()` **or** `right_join()` Example 2

```{r}
#| label: wd-5-left-right-ex-2
# Lab 5
#modified to use str_detect rather than grepl
get_fit_now_check_in |>
  left_join(get_fit_now_member, join_by(membership_id == id)) |>
  left_join(person, join_by(person_id == id, name == name)) |>
  filter(str_detect(name, "Annabel")
```

-   `inner_join()` Example 1

```{r}
#| label: wd-5-inner-ex-1
# Lab 5 (Modified)
person |>
  inner_join(interview, join_by(id == person_id)) |>
  filter(str_detect(name, "Annabel ") |
           ((address_street_name == "Northwestern Dr") &
              address_number == max(address_number)))
```

-   `inner_join()` Example 2

```{r}
#| label: wd-5-inner-ex-2
# Lab 5 (Modified)
get_fit_now_check_in |>
  inner_join(get_fit_now_member, join_by(membership_id == id)) |>
  inner_join(person, join_by(person_id == id, name == name)) |>
  filter(str_detect("Annabel", name))

```

**WD-6: I can use filtering joins to filter rows from a dataframe.**

-   `semi_join()`

```{r}
#| label: wd-6-semi

```

-   `anti_join()`

```{r}
#| label: wd-6-anti

```

**WD-7: I can pivot dataframes from long to wide and visa versa**

-   `pivot_longer()`

```{r}
#| label: wd-7-long
# Lab 4: Question 7
ca_childcare |>
  pivot_longer(
    c(mc_infant, mc_toddler, mc_preschool),
    names_to = "age_group",
    values_to = "weekly_cost"
  ) |>
  mutate(age_group = recode(age_group,
                            mc_infant="Infant", mc_toddler="Toddler", mc_preschool="Preschool")) |>
  ggplot(aes(study_year, weekly_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = `loess`, formula = 'y ~ x') +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500))+
  labs(
    title = "Weekly Median Price for Center-Based Childcare ($)",
    y = NULL,
    x = "Study Year",
    color = "California Region"
  ) +
  theme_bw() +
  theme(
    aspect.ratio = 1,
    axis.text.x = element_text(size = 6),
    legend.key.size = unit(3.0, "mm")
  )

```

-   `pivot_wider()`

```{r}
#| label: wd-7-wide
# Lab 4: Question 5
# feedback: Nice work remembering to drop the groups! The second group would not have been dropped by default, so this is an important step to remember!
#Can you give your column names better titles, so the reader knows what "2008" and "2018" represent? What are the values stored in these columns?

ca_childcare |>
  filter(study_year %in% c(2008, 2018)) |>
  group_by(census_region, study_year) |>
  summarise(med_income_2018_dollars = median(mhi_2018, na.rm = TRUE),
            .groups = "drop") |>
  pivot_wider(
    names_from  = study_year,
    values_from = med_income_2018_dollars
  ) |>
  rename(region = census_region, med_household_income_2018 = `2018`,
         med_household_income_2008 = `2008`) |>
  arrange(desc(med_household_income_2018))

```

## Reproducibility

**R-1: I can create professional looking, reproducible analyses using RStudio projects, Quarto documents, and the here package.**

The following assignments satisfy the above criteria:

-   Example 1 Lab 1

-   Example 2 Lab 2

-   Example 3 Lab 3

-   Example 4 Lab 4

-   Example 5 Lab 8

    All of these assignments use very similar Quarto headers for clean/ professional formatting and the here package to effectively import necessary files.

**R-2: I can write well documented and tidy code.**

-   Example of **ggplot2** plotting

```{r}
#| label: r-2-1
# Lab 2: Question 16
ggplot(data = surveys,
mapping = aes(y = species, x = weight)) +
    geom_jitter(color = "steelblue", alpha = 0.3) +
    geom_boxplot(outliers = FALSE) +
    labs(title = "What are the weight distributions between species?",
         y = "Species Type",
         x = "Weight (g)")
```

-   Example of **dplyr** pipeline

```{r}
#| label: r-2-2
# Lab 5
person |>
  left_join(drivers_license, by = join_by(license_id == id)) |>
  left_join(facebook_event_checkin, by = join_by(id == person_id)) |>
  mutate(date = ymd(date)) |>
  filter(height >= 65, height <= 67, hair_color == 'red',
         car_make == 'Tesla',
         car_model == 'Model S',
         event_name == "SQL Symphony Concert",
         year(date) == 2017, month(date) == '12') |>
  group_by(id, name) |>
  summarise(cnt = n(), .groups = 'drop' ) |>
  filter(cnt == 3) |>
  pull(name)
```

-   Example of function formatting

```{r}
#| label: r-2-3
# Lab 8: Question 3
format_label <- function(var) {
    label <- var |>
      str_replace_all("_", " ") |>
      str_to_lower() |>                 
      str_to_title() |>
      str_replace("Mm", "(mm)")
    return(label)
}

```

**R-3: I can write robust programs that are resistant to changes in inputs.**

-   Example (any context)

```{r}
#| label: r-3-example
# Lab 5
#explanation: this code helps us select the correct suspect from the data without actually knowing who they are but by their description. If the data changed and there was a different culprit matching their description, they would also appear in the result.
person |>
  left_join(drivers_license, by = join_by(license_id == id)) |>
  left_join(facebook_event_checkin, by = join_by(id == person_id)) |>
  mutate(date = ymd(date)) |>
  filter(height >= 65, height <= 67, hair_color == 'red',
         car_make == 'Tesla', car_model == 'Model S', event_name == "SQL Symphony Concert",
         year(date) == 2017, month(date) == '12') |>
  group_by(id, name) |>
  summarise(cnt = n(), .groups = 'drop' ) |>
  filter(cnt == 3) |>
  pull(name)

```

-   Example (function stops)

```{r}
#| label: r-3-function-stops
# Lab 7: Question 1
rescale_01 <- function(vec) {
  if (!is.numeric(vec)) {
    stop("Input must be numeric.")
  }

  if (length(vec) <= 1) {
    stop("Input vector must have length greater than 1.")
  }
  rng <- range(vec, na.rm = TRUE)
  (vec - rng[1]) / (rng[2] - rng[1])
}

```

## Data Visualization & Summarization

**DVS-1: I can create visualizations for a *variety* of variable types (e.g., numeric, character, factor, date)**

-   At least two numeric variables

```{r}
#| label: dvs-1-num
# Lab 10: Question 13
# sample
plot_ci <- ci_results |>
  slice_sample(n = 100) |>
  mutate(
    sim = row_number(),
    color = if_else(cover == 1, "covered", "missed")
  )

ggplot(plot_ci, aes(y = sim)) +
  geom_segment(
    aes(x = conf.low, xend = conf.high,
        y = sim, yend = sim,
        color = color),
    linewidth = 0.4
  ) +
  geom_vline(xintercept = 0.5, linetype = "dashed") +
  scale_color_manual(
    values = c("covered" = "skyblue3",
               "missed"  = "red3")
  ) +
  labs(
    title = "95% Confidence Intervals of Estimated Regression Slope<br>for 100 Simulated Datasets",
    subtitle = "CI’s that <b>do not</b> include the population slope are highlighted in <span style='color:red;'>red</span>",
    x = "Slope Coefficient Estimate",
    y = NULL,
    color = NULL
  ) +
  theme_bw() +
  theme(
    legend.position = "none",
    plot.title = element_markdown(size = 16),
    plot.subtitle = element_markdown(size = 12),
    panel.grid.major.y = element_blank(),
    panel.grid.minor = element_blank()
  )

```

-   At least one numeric variable and one categorical variable

```{r}
#| label: dvs-2-num-cat
#Lab 2: Question 16
ggplot(data = surveys,
mapping = aes(y = species, x = weight)) +
    geom_jitter(color = "steelblue", alpha = 0.3) +
    geom_boxplot(outliers = FALSE) +
    labs(title = "What are the weight distributions between species?",
         y = "Species Type",
         x = "Weight (g)")
```

-   At least two categorical variables

```{r}
#| label: dvs-2-cat
# Lab 8: Question 4
# my solution tried to build the proper function names based on the arguments
style_plot <- function(
  plot,
  theme_fn = theme_minimal(),
  palette  = RColorBrewer::brewer.pal(9, "YlGnBu"),
  aesthetic = "color",
  scale_type = "continuous"
  # pick the scale type ("continuous" or "discrete")
) {

  # Build correct scale function name
  scale_fn_name <- if (scale_type == "continuous") {
    str_c("scale_", aesthetic, "_gradientn")   #use gradientn for continuous scales
  } else {
    str_c("scale_", aesthetic, "_manual")      #use manual for discrete
  }
  # execute proper function with correct param names
  scale_layer <- if (scale_type == "continuous") {
    exec(as.symbol(scale_fn_name), colors = palette)
  } else {
    exec(as.symbol(scale_fn_name), values  = palette)
  }

  plot + 
    scale_layer + 
    theme_fn
}
my_plot <- ggplot(penguins, mapping = aes(x = species, fill = sex)) + 
  geom_bar()

style_plot(my_plot, 
           theme_fn = theme_bw(), 
           palette = brewer.pal(3, "Paired"), 
           aesthetic = "fill",
           scale_type = "discrete")

```

-   Dates (time series plot)

```{r}
#| label: dvs-2-date
# Lab 4: Question 7
ca_childcare |>
  pivot_longer(
    c(mc_infant, mc_toddler, mc_preschool),
    names_to = "age_group",
    values_to = "weekly_cost"
  ) |>
  mutate(age_group = recode(age_group,
                            mc_infant="Infant", mc_toddler="Toddler", mc_preschool="Preschool"),
  age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool")) |>
  ggplot(aes(study_year, weekly_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = `loess`, formula = 'y ~ x') +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500))+
  labs(
    title = "Weekly Median Price for Center-Based Childcare ($)",
    y = NULL,
    x = "Study Year",
    color = "California Region"
  ) +
  theme_bw() +
  theme(
    aspect.ratio = 1,
    axis.text.x = element_text(size = 6),
    legend.key.size = unit(3.0, "mm")
  )

```

**DVS-2: I use plot modifications to make my visualization clear to the reader.**

-   I can modify my plot theme to be more readable

```{r}
#| label: dvs-2-ex-1
# Lab 4: Question 7
ca_childcare |>
  pivot_longer(
    c(mc_infant, mc_toddler, mc_preschool),
    names_to = "age_group",
    values_to = "weekly_cost"
  ) |>
  mutate(age_group = recode(age_group,
                            mc_infant="Infant", mc_toddler="Toddler", mc_preschool="Preschool"),
  age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool")) |>
  ggplot(aes(study_year, weekly_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = `loess`, formula = 'y ~ x') +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500))+
  labs(
    title = "Weekly Median Price for Center-Based Childcare ($)",
    y = NULL,
    x = "Study Year",
    color = "California Region"
  ) +
  theme_bw() +
  theme(
    aspect.ratio = 1,
    axis.text.x = element_text(size = 6),
    legend.key.size = unit(3.0, "mm")
  )

```

-   I can modify my colors to be accessible to anyone's eyes

    source: <https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html>

```{r}
#| label: dvs-2-ex-2
# Lab 4: Question 7 (Modified)
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"
    ),
    age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool")
  ) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500)) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "D") +
  scale_fill_viridis_d(option = "D") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(3.0, "mm"))


```

-   I can modify my plot titles to clearly communicate the data context

```{r}
#| label: dvs-2-ex-3
# Lab 4: Question 8
#modified to add $ on axis values
ca_childcare |>
  ggplot(aes(x = mhi_2018,
             y = mc_infant,
             color = census_region)) +
  geom_point(alpha = 0.7) +
  geom_smooth(method = "lm", color = "black", formula = 'y ~ x') +
  geom_text(aes(label = census_region),
            size = 2,
            vjust = -0.5,
            check_overlap = TRUE) +
  scale_y_continuous(labels = label_dollar()) +
  scale_x_continuous(labels = label_dollar()) +
  labs(
    title = "Income vs. Infant Center-Based Childcare Cost (CA, 2008–2018)",
    x = "Median Household Income (2018 dollars)",
    y = "Median Weekly Price (Infant, Center-Based)",
    color = "Region"
  ) +
  theme_bw() 

```

-   I can modify the text in my plot to be more readable

```{r}
#| label: dvs-2-ex-4
# Lab 4: Question 7
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"),
      age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool"),
      census_region = fct_reorder2(census_region, study_year, weekly_cost)) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2),
                     limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100),
                     limits = c(100, 500),
                     labels = label_dollar()) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "magma") +
  scale_fill_viridis_d(option = "magma") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(4.0, "mm")) 

```

-   I can reorder my legend to align with the colors in my plot

```{r}
#| label: dvs-2-ex-5
# Lab 4: Question 7 (Modified)
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"),
      age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool"),
      census_region = fct_reorder2(census_region, study_year, weekly_cost)) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2),
                     limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100),
                     limits = c(100, 500),
                     labels = label_dollar()) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "magma") +
  scale_fill_viridis_d(option = "magma") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(4.0, "mm")) 

```

**DVS-3: I show creativity in my visualizations**

-   I can use non-standard colors (Example 1)

```{r}
#| label: dvs-3-1-ex-1
# Lab 4: Question 7
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"
    ),
    age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool")
  ) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500)) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "D") +
  scale_fill_viridis_d(option = "D") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(3.0, "mm"))

```

-   I can use non-standard colors (Example 2)

```{r}
#| label: dvs-3-1-ex-2
# Challenge 7: Question 5

cond_df <- cleaned_fish |>
  mutate(cond_idx = condition_index(weight, length))

cond_summary <- cond_df |>
  group_by(year, section, species) |>
  summarise(cond_idx_median = median(cond_idx, na.rm = TRUE), .groups = "drop")

ggplot(cond_summary,
       aes(x = factor(year), y = cond_idx_median, color = species, group = species)) +
  geom_line(linewidth = 0.9) +
  geom_point(size = 2) +
  facet_wrap(~ section) +
  scale_color_viridis_d(option = "magma") +
  labs(
    title = "Fish Condition Over Time by River Section and Species",
    x = "Year",
    y = "Median Condition Index",
    color = "Species"
  ) +
  theme_bw() +
  theme(
    axis.text.x = element_text(size = 8),
    panel.grid.minor = element_blank()
  )

#I was trying to use a more distinct plot type, I thought the bubble plot was cool,
# but not entirely easy to read so I decided to make a line plot too
cond_bubble <- cond_df |>
  group_by(year, species, section) |>
  summarise(
    cond_idx_median = median(cond_idx, na.rm = TRUE),
    n = n(),
    .groups = "drop"
  )

ggplot(cond_bubble,
       aes(x = factor(year), y = cond_idx_median, color = species, size = n)) +
  geom_point(alpha = 0.8) +
  facet_wrap(~ section) +
  scale_color_viridis_d(option = "magma") +
  scale_size_continuous(range = c(2, 8)) +
  labs(
    title = "Fish Condition and Sampling Intensity by Year and Section",
    x = "Year",
    y = "Median Condition Index",
    color = "Species",
    size = "Sample size"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    axis.text.x = element_text(size = 7),
    panel.grid.minor = element_blank()
  )

```

-   I can use annotations (e.g., `geom_text()`)

```{r}
#| label: dvs-3-2
(scatter_plot(penguins, bill_length_mm, bill_depth_mm) +
    geom_text(
      aes(label = str_glue("({bill_length_mm}, {bill_depth_mm})")),
      size = 2.5,
      vjust = -0.8,
      check_overlap = TRUE,
      color = "black"
    )
) |>
  style_plot(
    theme_fn  = theme_bw(),
    palette   = viridisLite::viridis(256),
    aesthetic = "color",
    scale_type = "continuous"
  )

```

-   I can choose creative geometries (e.g., `geom_segment()`, `geom_ribbon)()`)

```{r}
#| label: dvs-3-3
# Challenge 4 (Modified to use ribbon)
gap <- yearly_summary |>
  group_by(study_year) |>
  summarise(
    ymin = min(median_price, na.rm = TRUE),
    ymax = max(median_price, na.rm = TRUE),
    .groups = "drop"
  )

ggplot() +
  geom_ribbon(data = gap, aes(x = study_year, ymin = ymin, ymax = ymax),
              fill = "grey80", alpha = 0.35) +
  geom_line(data = yearly_summary, aes(x = study_year, y = median_price, color = setting), linewidth = 0.9) +
  geom_point(data = yearly_summary, aes(x = study_year, y = median_price, color = setting), size = 1.8) +
  scale_x_continuous(breaks = yearly_summary$study_year) +
  labs(
    title = "Median Weekly Infant Childcare Price by Setting (CA, 2008–2018)",
    x = "Year",
    y = "Median Weekly Price (USD)",
    color = "Setting"
  ) +
  theme_bw()

```

**DVS-4: I can calculate numerical summaries of variables.**

-   Example using `summarize()`

```{r}
#| label: dvs-4-summarize
# Lab 3: Question 12
teacher_evals_clean |>
  filter(academic_degree %in% c('dr', 'prof')) |>
  group_by(teacher_id) |>
  summarise(
    avg_response = mean(resp_share),
    seniority = first(seniority),
    sex = first(sex),
    .groups = "drop"
  ) |>
  filter(avg_response %in% c(max(avg_response), min(avg_response))) |>
  select(teacher_id, avg_response, seniority, sex) |>
  arrange(desc(avg_response))
```

-   Example using `across()`

```{r}
#| label: dvs-4-across
# Lab 3: Question 5
teacher_evals_clean <- evals |>
  rename(sex = gender) |>
  filter(no_participants >= 10) |>
  mutate(
    across(.cols = c(teacher_id, course_id, academic_degree, sex), .fns = ~ as.factor),
    seniority = as.integer(seniority)
  ) |>
  select(c(course_id,
           teacher_id,
           question_no,
           no_participants,
           resp_share,
           SET_score_avg,
           percent_failed_cur,
           academic_degree,
           seniority,
           sex
           ))
# modification for making summary columns like mean and sd for different columns in teacher_evals_clean
teacher_evals_summary <- teacher_evals_clean |>
  summarise(
    n = n(),
    across(
      .cols = c(no_participants, resp_share, SET_score_avg,
                percent_failed_cur, seniority),
      .fns = list(
        mean = ~ mean(.x, na.rm = TRUE),
        sd   = ~ sd(.x, na.rm = TRUE)
      ),
      .names = "{.col}_{.fn}"
    )
  )

teacher_evals_summary

```

**DVS-5: I can find summaries of variables across multiple groups.**

-   Example 1

```{r}
#| label: dvs-5-1
# Lab 3: Question 9
teacher_evals_clean |>
  group_by(course_id, teacher_id) |>
  summarise(n_questions = n_distinct(question_no, na.rm = TRUE),
            .groups = "drop") |>
  summarise(all_9 = sum(n_questions == 9))

```

-   Example 2

```{r}
#| label: dvs-5-2
# Lab 3: Question 7 (Modified)
# feedback: Look at your counts! This seems like a lot more teachers than you found in Question 6! What do you need to do before calculating the summary statistics?
instructors <- teacher_evals_clean |>
  distinct(teacher_id, .keep_all = TRUE)


instructors |>
  group_by(academic_degree, sex) |>
  summarise(
    n_instructors = n(),
    avg_seniority = mean(seniority),
    min_seniority = min(seniority),
    max_seniority = max(seniority),
    .groups = "drop"
  ) |>
  arrange(desc(n_instructors))

```

**DVS-6: I can create tables which make my summaries clear to the reader.**

-   I can modify my column names to clearly communicate the data context

```{r}
#| label: dvs-6-ex-1
# Lab 9: Question 8
empty_fish |>
  arrange(n_missing)|>
  rename(
    "Measurement Variable" = variable,
    "Missing Values" = n_missing
  )|>
  gt()|>
  data_color(method = "numeric",
             palette = c("#1c9e77", "#d95d04"))|>
  tab_header(
    title = "Number of Missing Values for Fish Measurements",
    subtitle = "Data Collected from 1989 to 2006 on the Blackfoot Fish River in Montana"
  )|>
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels(
      columns = everything()
    )
  )

```

-   I can modify the text in my table to be more readable (e.g., bold face for column headers)

```{r}
#| label: dvs-6-ex-2
# Lab 9: Question 6
evals_kbl |>
  rename(
    Demographic = variable,
    Group = level,
    Count = n,
    Percent = prop
  ) |>
  mutate(
    Percent = percent(Percent, accuracy = 0.01)
  ) |>
  select(Demographic, Group, Count, Percent) |>
  kable(
    col.names = c("Demographic", "Group", "Count", "%"),
    align = c("l", "l", "r", "r"),
    caption = "Instructor Demographics"
  ) |>
  collapse_rows(columns = 1, valign = "top") |>
  add_header_above(c(" " = 2, "Professor" = 2)) |>
  kable_styling(
    full_width = FALSE,
    bootstrap_options = "striped"
  )

```

-   I can arrange my table to have an intuitive ordering

```{r}
#| label: dvs-6-ex-3
# Lab 4: Question 7 (Modified)
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"),
      age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool"),
      census_region = fct_reorder(census_region, weekly_cost, mean, .desc = TRUE)
  ) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500)) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "D") +
  scale_fill_viridis_d(option = "D") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(3.0, "mm"))

```

**DVS-7: I show creativity in my tables.**

-   I can use non-default colors

```{r}
#| label: dvs-7-ex-1
# Lab 9: Question 3
surveys |>
  map_chr(.f = ~ class(.x)) |>
  enframe() |>
  arrange(value) |>
  kable(col.names = c("Column","Data Type"),
        caption = "Data Types of Columns in the surveys table") |>
  row_spec(0, bold = TRUE) |>
  kable_material_dark()

```

-   I can modify the layout of my table to be more readable (e.g., `pivot_longer()` or `pivot_wider()`)

```{r}
#| label: dvs-7-ex-2
# Lab 9: Question 5
evals_kbl <- teacher_evals_clean |>
  distinct(teacher_id, .keep_all = TRUE) |>
  mutate (
    sen_level = case_when (
      seniority <= 4 ~ "Junior",
      seniority <= 8 ~ "Senior",
      seniority > 8 ~ "Very Senior"
    ),
    academic_degree = recode(academic_degree,
                             "no_dgr" = "No Degree",
                             "ma" = "Masters",
                             "dr" = "Doctorate",
                             "prof" = "Professor"),
    sex = recode(sex, 
                 "male" = "Male",
                 "female" = "Female"),
  )|>
    select(teacher_id, academic_degree, sen_level, sex) |>
  pivot_longer(
    cols = c(academic_degree, sen_level, sex),
    names_to = "variable",
    values_to = "level"
  )|>
  count(variable, level, name = "n") |>
  group_by(variable) |>
  mutate(prop = n / sum(n),
         variable = recode(variable,
                           "academic_degree" = "Academic Degree",
                           "sen_level" = "Seniority",
                           "sex" = "Sex")) |>
  ungroup()
  evals_kbl|>
  kable()|>
  kable_styling(full_width = FALSE,
                bootstrap_options = "striped")

```

## Program Efficiency

**PE-1: I can write concise code which does not repeat itself.**

-   using a single function call with multiple inputs (rather than multiple function calls)

```{r}
#| label: pe-1-one-call
# Lab 4: Question 5
# calling filter once for years in 2008 and 2018 rather than two seperate filters
# feedback: Nice work remembering to drop the groups! The second group would not have been dropped by default, so this is an important step to remember!
#Can you give your column names better titles, so the reader knows what "2008" and "2018" represent? What are the values stored in these columns?

ca_childcare |>
  filter(study_year %in% c(2008, 2018)) |>
  group_by(census_region, study_year) |>
  summarise(med_income_2018_dollars = median(mhi_2018, na.rm = TRUE),
            .groups = "drop") |>
  pivot_wider(
    names_from  = study_year,
    values_from = med_income_2018_dollars
  ) |>
  rename(region = census_region, med_household_income_2018 = `2018`,
         med_household_income_2008 = `2008`) |>
  arrange(desc(med_household_income_2018))
```

-   using `across()`

```{r}
#| label: pe-1-across
# Lab 3: Question 5
# call as.factor across multiple columns 
teacher_evals_clean <- evals |>
  rename(sex = gender) |>
  filter(no_participants >= 10) |>
  mutate(
    across(.cols = c(teacher_id, course_id, academic_degree, sex), .fns = ~ as.factor),
    seniority = as.integer(seniority)
  ) |>
  select(c(course_id,
           teacher_id,
           question_no,
           no_participants,
           resp_share,
           SET_score_avg,
           percent_failed_cur,
           academic_degree,
           seniority,
           sex
           ))

```

-   using functions from the `map()` family

```{r}
#| label: pe-1-map-1
# Lab 9: Question 1
surveys |>
  map_chr(.f = ~ class(.x)) |>
  enframe(name = "Column", value = "Data Type") |>
  kable()
```

**PE-2: I can write functions to reduce repetition in my code.**

-   Example 1: Function that operates on vectors

```{r}
#| label: pe-2-1
# Challenge 7: Question 2
validate_range <- function(measurements, min, max) {
  measurements[measurements < min | measurements > max] <- NA
  return(measurements)
}
```

-   Example 2: Function that operates on data frames

```{r}
#| label: pe-2-2
# Lab 8: Question 1
rescale_column <- function(df, cols) {
  df |>
    mutate(
      across(.cols = {{ cols }},
             .fns = rescale_01
             )
    )
}
```

-   Example 3: Function that operates on vectors *or* data frames

```{r}
#| label: pe-2-3
# Lab 8: Question 4
style_plot <- function(
  plot,
  theme_fn = theme_minimal(),
  palette  = RColorBrewer::brewer.pal(9, "YlGnBu"),
  aesthetic = "color",
  scale_type = "continuous"
  # pick the scale type ("continuous" or "discrete")
) {

  # Build correct scale function name
  scale_fn_name <- if (scale_type == "continuous") {
    str_c("scale_", aesthetic, "_gradientn")   #use gradientn for continuous scales
  } else {
    str_c("scale_", aesthetic, "_manual")      #use manual for discrete
  }
  # execute proper function with correct param names
  scale_layer <- if (scale_type == "continuous") {
    exec(as.symbol(scale_fn_name), colors = palette)
  } else {
    exec(as.symbol(scale_fn_name), values  = palette)
  }

  plot + 
    scale_layer + 
    theme_fn
}

```

**PE-3:I can use iteration to reduce repetition in my code.**

-   using `across()`

```{r}
#| label: pe-3-across
# Lab 7: Question 1
fish |> 
  summarise(across(everything(), ~ sum(is.na(.)))) |> 
  mutate(total_obs_with_missing = fish |>
    filter(if_any(everything(), is.na)) |>
    nrow())

```

-   using a `map()` function with **one** input (e.g., `map()`, `map_chr()`, `map_dbl()`, etc.)

```{r}
#| label: pe-3-map-1
# Lab 9: Question 2
surveys |>
  map_chr(.f = ~ class(.x)) |>
  enframe(name = "Column", value = "Data Type") |>
  kable()

```

-   using a `map()` function with **more than one** input (e.g., `map_2()` or `pmap()`)

```{r}
#| label: pe-3-map-2
# Lab 9: Question 2
# I didnt have any examples of mapping over multiple things in my labs, This shows how you could turn the table values into an english sentence by mapping over both values. This isn't a super practical example but still cool.
surveys |>
  map_chr(.f = ~ class(.x)) |>
  enframe(name = "Column", value = "Data Type") |>
  mutate(Sentence = map2_chr(
    .x = Column,
    .y = `Data Type`,
    .f = ~ paste(.x, "is of type", .y))) |>
  kable()


```

**PE-4: I can use modern tools when carrying out my analysis.**

-   I can use functions which are not superseded or deprecated

```{r}
#| label: pe-4-1
# Challenge 3: Question 2
# initially I used percent_format() which is now superseded by label_percent().

ggplot(data = teacher_evals_compare, mapping = aes(x = sen_level, fill = SET_level)) +
  geom_bar(position = "fill") +
  labs(title = "Evaluation of Teachers' Use of Activities",
       y = "",
       x = "Years of Experience",
       fill = "Evaluation Rating"
       ) +
  theme_bw() +
  theme(
    legend.position = "top"
  ) + 
   scale_fill_manual(
    values = c("excellent" = "darkorchid1", "standard" = "darkgoldenrod")
    # the colors don't really match was just trying to find the closest default color #code I could find online 
  ) +
  scale_y_continuous(labels = scales::label_percent())

```

-   I can connect a data wrangling pipeline into a `ggplot()`

```{r}
#| label: pe-4-2
# Lab 4: Question 6
library(viridis)

ca_childcare |>
  pivot_longer(c(mc_infant, mc_toddler, mc_preschool),
               names_to = "age_group", values_to = "weekly_cost") |>
  mutate(
    age_group = recode(age_group,
      mc_infant = "Infant", mc_toddler = "Toddler", mc_preschool = "Preschool"),
      age_group = fct_relevel(age_group, "Infant", "Toddler", "Preschool"),
      census_region = fct_reorder(census_region, weekly_cost, mean, .desc = TRUE)
  ) |>
  ggplot(aes(study_year, weekly_cost,
             color = census_region, fill = census_region)) +
  geom_point(alpha = 0.5, size = 0.8) +
  geom_smooth(method = "loess", formula = y ~ x, se = TRUE) +
  facet_grid(~ age_group) +
  scale_x_continuous(breaks = seq(2008, 2018, 2), limits = c(2008, 2018)) +
  scale_y_continuous(breaks = seq(100, 500, 100), limits = c(100, 500)) +
  labs(title = "Weekly Median Price for Center-Based Childcare ($)",
       y = NULL, x = "Study Year", color = "California Region", fill = "California Region") +
  scale_color_viridis_d(option = "magma") +
  scale_fill_viridis_d(option = "magma") +
  theme_bw() +
  theme(aspect.ratio = 1, axis.text.x = element_text(size = 6),
        legend.key.size = unit(3.0, "mm"))


```

## Data Simulation & Statisical Models

**DSSM-1: I can simulate data from a *variety* of probability models.**

-   Example 1

```{r}
#| label: dsm-1-1
# Lab 10: Question 1
set.seed(14)

randomBabies <- function(n_babies){
  returned <- sample(1:n_babies,
                     n_babies,
                     replace = FALSE)
  sum(returned == 1:n_babies)
}

```

-   Example 2

```{r}
#| label: dsm-1-2
#Lab 10: Question 8
mycifun <- function(beta0, beta1, n) {
  x  <- runif(n, min = 0, max = 1)
  ep <- rnorm(n, mean = 0, sd = 1)
  y  <- beta0 + beta1 * x + ep
  model <- lm(y ~ x)
  tidy(model, conf.int = TRUE) |>
    filter(term == "x") |>
    mutate(
      slope_est = estimate, 
      cover = if_else(
        conf.low <= beta1 & conf.high >= beta1, 1L, 0L)
    ) |>
    select(slope_est, conf.low, conf.high, cover)
}
```

**DSSM-2: I can conduct common statistical analyses in R.**

-   Example 1

```{r}
#| label: dsm-2-1
# Lab 1: Question 11
# feedback: Technically, you don't need the c() around the "two.sided" for the alternative =

t.test(len ~ supp , data = ToothGrowth, alternative = "two.sided", var.equal = FALSE, conf.level = 0.95)

```

-   Example 2

```{r}
#| label: dsm-2-2
# Lab 2: Question 17
summary(aov(weight ~ species, data = surveys))

```

-   Example 3

```{r}
#| label: dsm-2-3
# Lab 10: Question 5
regression <- lm(y ~ x, data = obs_data)

```

## Revising My Thinking

<!-- How did you revise your thinking throughout the course? How did you revise your thinking on the code examples you have provided in your portfolio? -->

Throughout the course I have continually revised my thinking through assignment revisions as well as carrying the lessons learned from this feedback to later assignments. This is evident through many design and function choices in my code as well as using proper Quarto document structuring and YAML options. For specific examples of revised thinking in my code, refer to code with feedback in comments of this portfolio.

<!-- For the revisions included in your Portfolio, to help me understand the nature of your revisions, please denote somehow the feedback I provided you (e.g., boldface, italics, colored text) before your revisions. -->

## Extending My Thinking

<!-- How did you extended your thinking throughout the course? How did you extend your thinking on the code examples you have provided in your portfolio? -->

I have used many resources to expand my thinking beyond the resources presented in class. This has mostly come from package documentation for learning how to best take advantage of a function and what other functions might work well with it. On occasion I have also asked generative AI clarifying questions and which libraries/ functions are good options to accomplish a particular task, though I have largely stayed away from AI because its easy to miss out on a lot of learning if used in excess. Noteable examples of this expanded thinking are my use of grep functions in Lab 5 which I was already familiar with in working with the Unix (POSIX) operating system in CS classes. Some other examples are learning how to use a geom ribbon (and what a geom ribbon is), as well as exploring different themes and color options (my favorite so far is viridis using "D", which looks a lot like a heatmap).

## Peer Support & Collaboration

<!-- Include an image or a description of feedback you gave that you are proud of (either in a peer review or in Discord). -->

<!-- Include a description of how you grew as a collaborator through the weekly pair programming activities.   -->

Much of my learning this quarter has been cemented through collaborating with other students. The clearest example of this is through code reviews for Labs.

One example is in Lab 2: "Hey Sebastien, great job on Lab 2. I really liked the theme you used for your quarto document! Overall your code and formatting look good, but one suggestion I have is that when you make a newline within a function call (because the parameters take up too much space) Its a good idea to also indent this line so its easier to tell visually that you are continuing the function call rather than chaining another +. One other thing I noticed was in your boxplot code you are rendering the boxplot before the jitter. Since there are so many points, most of the boxplots are getting covered. I would recommend swapping the order so the boxplot appears on top of the points so It is easier to look at. Good Job!".

The other main way I grew is through our pair programming activities. I've grown to communicate my ideas more clearly and work with others more effectively. I have really enjoyed the pair programming assignments because I have been able to see how others solve problems and understand possibly better ways of doing things which has helped me improve my R skills as well.
